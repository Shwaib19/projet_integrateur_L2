{% extends "base/layout.html" %}
{% load static%}
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Agence Immobilière HAVA{% endblock title %}</title>
    {% block css %}
    <link rel="stylesheet" href="{% static 'css/welcome/index.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    {% endblock css %}
   

    <main class="content-area">
        {% block content %}
        


        <section id="hero" class="hero-section" style ="
        background: linear-gradient(rgba(45, 58, 81, 0.7), rgba(79, 98, 125, 0.6)) ,url('{% static 'img/service/hero-background.png' %}') no-repeat center center/cover;
        color: var(--light-text-color);
        text-align: center;
        padding: 6rem 1rem; "
                
            >
            <div class="hero-content">
                <h1>Trouvez la propriété de vos rêves avec Hava</h1>
                <p>Découvrez une sélection exclusive de biens immobiliers.</p>
            </div>
        </section>



        <section id="featured-properties" class="content-section">
            <h2>Propriétés à la Une</h2>

        <!-- Filter Options -->
        <div class="filter-bar">
            <input type="text" id="filter-location" placeholder="Ville, quartier..." aria-label="Filtrer par localisation">
            <select id="filter-type" aria-label="Filtrer par type">
                <option value="all">Tous types</option>
                <option value="APPART">Appartement</option>
                <option value="VILLA">Villa</option>
                <option value="LOCAL">Local commercial</option>
                <option value="MAISON">Terrain</option>
                <option value="PARKING">Parking</option>
            </select>
            <input type="number" id="filter-min-price" placeholder="Prix Min (fcfa)" aria-label="Prix minimum">
            <input type="number" id="filter-max-price" placeholder="Prix Max (fcfa)" aria-label="Prix maximum">
            <button id="apply-filters">Filtrer</button>
        </div>


            
            <div class="property-grid">

                {% for propriete in proprietes %}
                <div class="property-card"
                    data-localisation="{{ propriete.localisation|lower }}"
                    data-type="{{ propriete.type }}"
                    data-prix="{{ propriete.prix }}">

                    <img src="{{ propriete.images.first.image.url }}" alt="{{ propriete.type }} à {{ propriete.localisation }}">
                    
                    <div class="property-tag">{{ propriete.option }}</div>
                    <div class="property-info">
                    <h3>{{ propriete.type }} - {{ propriete.localisation }}</h3>
                    {% if propriete.option == "location" %}
                    <p class="price">{{propriete.prix}} fcfa /mois</p>
                    {%else%}
                    <p class="price">{{propriete.prix}} fcfa</p>
                    {% endif %}
                    <p>{{ propriete.usage }}</p>
                    <a href="{% url 'propriete_detail' propriete.pk %}" class="details-btn">Voir Détails</a>
                    </div>
                </div>
                {% endfor %}


                
            </div>
        </section>

        
        
        <footer class="content-footer">
            <p>Suivez-nous sur les réseaux sociaux!</p>
            <div class="social-icons">
                <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
            </div>
        </footer>

        <script>
document.getElementById('apply-filters').addEventListener('click', function () {
    const locationInput = document.getElementById('filter-location').value.toLowerCase().trim();
    const typeValue = document.getElementById('filter-type').value;
    const minPrice = parseInt(document.getElementById('filter-min-price').value) || 0;
    const maxPrice = parseInt(document.getElementById('filter-max-price').value) || Infinity;

    const cards = document.querySelectorAll('.property-card');

    cards.forEach(card => {
        const loc = card.dataset.localisation;
        const type = card.dataset.type;
        const prix = parseInt(card.dataset.prix);

        const matchLocation = !locationInput || loc.includes(locationInput);
        const matchType = typeValue === 'all' || type === typeValue;
        const matchPrice = prix >= minPrice && prix <= maxPrice;

        if (matchLocation && matchType && matchPrice) {
            card.style.display = '';
        } else {
            card.style.display = 'none';
        }
    });
});
</script>



        {% endblock content %}
    </main>

    <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Ouvrir le menu" aria-expanded="false" aria-controls="sidebarMenu">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <script type="module">
        import { init } from 'app';
        init();
    </script>
    

</body>
</html>